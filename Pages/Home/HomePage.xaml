<Page
    x:Class="Plantilla.Pages.Home.HomePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <Style x:Key="StretchListViewItemStyle" TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <InfoBar x:Name="StatusInfoBar" IsOpen="False" Grid.Row="0" Margin="24,12,24,0"/>

        <StackPanel Grid.Row="1" Margin="24,24,24,24">
            <TextBlock Text="Home" Style="{ThemeResource TitleLargeTextBlockStyle}" FontSize="40" FontWeight="Bold" Margin="0,0,0,8"/>
            <TextBlock Text="Welcome to WTHIT" Style="{ThemeResource BodyTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>

        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20" Padding="24,0,24,24">
                
                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20">
                    <Grid>
                        <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                            <FontIcon Glyph="&#xE7C3;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                            <TextBlock Text="System Overview" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Row="1" Spacing="16">
                            <Grid><Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions><TextBlock Text="Total Processes" Style="{ThemeResource BodyTextBlockStyle}"/><TextBlock Grid.Column="1" x:Name="TotalProcessesText" Text="0" FontWeight="SemiBold"/></Grid>
                            <Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}"/>
                            <Grid><Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions><TextBlock Text="System Uptime" Style="{ThemeResource BodyTextBlockStyle}"/><TextBlock Grid.Column="1" x:Name="UptimeText" Text="0d 0h 0m" FontWeight="SemiBold"/></Grid>
                            <Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}"/>
                            <Grid><Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions><TextBlock Text="WTHIT Version" Style="{ThemeResource BodyTextBlockStyle}"/><TextBlock Grid.Column="1" Text="1.0.0" FontWeight="SemiBold"/></Grid>
                        </StackPanel>
                    </Grid>
                </Border>

                <Grid x:Name="ResponsiveLayoutContainer">
                    <Grid x:Name="WideLayoutGrid" Visibility="Visible">
                        <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="Auto"/></Grid.RowDefinitions>
                        <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="*"/></Grid.ColumnDefinitions>

                        <!-- Card: Top Consuming Processes -->
                        <Border Grid.Row="0" Grid.Column="0" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,0,10,10">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                    <FontIcon Glyph="&#xE7F8;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                    <TextBlock Text="Top Consuming Processes" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    <Button x:Name="RefreshTopProcessesButton" Click="RefreshTopProcessesButton_Click" ToolTipService.ToolTip="Refresh list" Padding="8" Style="{StaticResource AccentButtonStyle}">
                                        <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                                    </Button>
                                </StackPanel>
                                <ListView x:Name="TopProcessesListView" Grid.Row="1" SelectionMode="None" HorizontalAlignment="Stretch" ItemContainerStyle="{StaticResource StretchListViewItemStyle}">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.ColumnDefinitions><ColumnDefinition Width="3*"/><ColumnDefinition Width="*"/><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="{Binding ProcessName}" VerticalAlignment="Center" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"/>
                                                    <Button Grid.Column="1" Click="SortByCpu_Click" Padding="8,4" Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" ToolTipService.ToolTip="Click to sort by CPU">
                                                        <StackPanel Orientation="Vertical" Spacing="2">
                                                            <FontIcon Glyph="&#xE950;" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding CpuUsage}" HorizontalAlignment="Center" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                                        </StackPanel>
                                                    </Button>
                                                    <Button Grid.Column="2" Click="SortByRam_Click" Padding="8,4" Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" ToolTipService.ToolTip="Click to sort by RAM">
                                                        <StackPanel Orientation="Vertical" Spacing="2">
                                                            <FontIcon Glyph="&#xE8C1;" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding MemoryUsage}" HorizontalAlignment="Center" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                                        </StackPanel>
                                                    </Button>
                                                    <Button Grid.Column="3" Content="Scan" Click="ScanTopProcessButton_Click" Padding="12,4" VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </Border>

                        <!-- Card: Scan Results -->
                        <Border Grid.Row="0" Grid.Column="1" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20" Margin="10,0,0,10">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                        <FontIcon Glyph="&#xE9F9;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                        <TextBlock Text="Scan Results" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button Grid.Column="1" x:Name="CleanAllButton" Content="Clean All" Click="CleanAllScanResults_Click" Visibility="Collapsed" Style="{StaticResource AccentButtonStyle}" Padding="12,6"/>
                                </Grid>
                                <ScrollViewer Grid.Row="1" MaxHeight="250" VerticalScrollBarVisibility="Auto">
                                    <ListView x:Name="ScanResultsListView" SelectionMode="None" HorizontalAlignment="Stretch" Margin="-12,0">
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Padding="12,8">
                                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="{Binding ProcessName}" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                                        <TextBlock Text="{Binding ScanResult}" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" TextTrimming="CharacterEllipsis"/>
                                                    </StackPanel>
                                                    <Button Grid.Column="1" Content="Clean" Click="CleanScanResult_Click" Padding="12,6" VerticalAlignment="Center"/>
                                                </Grid>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>
                                </ScrollViewer>
                            </Grid>
                        </Border>

                        <!-- Card: Coming Soon -->
                        <Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,10,0,0">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                    <FontIcon Glyph="&#xE9F9;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                    <TextBlock Text="Coming Soon" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Spacing="16">
                                    <Border Background="{ThemeResource AccentFillColorDefaultBrush}" Opacity="0.5" CornerRadius="6" Padding="12">
                                        <StackPanel Spacing="4">
                                            <TextBlock Text="New Features" FontWeight="SemiBold"/>
                                            <TextBlock Text="We're working on exciting new features for this section. Stay tuned for updates!" TextWrapping="Wrap" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>

                    <StackPanel x:Name="NarrowLayoutPanel" Spacing="10" Visibility="Collapsed">
                        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                    <FontIcon Glyph="&#xE7F8;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                    <TextBlock Text="Top Consuming Processes" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    <Button x:Name="RefreshTopProcessesButtonNarrow" Click="RefreshTopProcessesButton_Click" ToolTipService.ToolTip="Refresh list" Padding="8" Style="{StaticResource AccentButtonStyle}">
                                        <FontIcon Glyph="&#xE72C;" FontSize="14"/>
                                    </Button>
                                </StackPanel>
                                <ListView x:Name="TopProcessesListViewNarrow" Grid.Row="1" SelectionMode="None" HorizontalAlignment="Stretch" ItemContainerStyle="{StaticResource StretchListViewItemStyle}">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Border Padding="12,8" CornerRadius="4">
                                                <Grid>
                                                    <Grid.ColumnDefinitions><ColumnDefinition Width="3*"/><ColumnDefinition Width="*"/><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="{Binding ProcessName}" VerticalAlignment="Center" FontWeight="SemiBold" TextTrimming="CharacterEllipsis"/>
                                                    <Button Grid.Column="1" Click="SortByCpu_Click" Padding="8,4" Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" ToolTipService.ToolTip="Click to sort by CPU">
                                                        <StackPanel Orientation="Vertical" Spacing="2">
                                                            <FontIcon Glyph="&#xE950;" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding CpuUsage}" HorizontalAlignment="Center" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                                        </StackPanel>
                                                    </Button>
                                                    <Button Grid.Column="2" Click="SortByRam_Click" Padding="8,4" Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" ToolTipService.ToolTip="Click to sort by RAM">
                                                        <StackPanel Orientation="Vertical" Spacing="2">
                                                            <FontIcon Glyph="&#xE8C1;" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding MemoryUsage}" HorizontalAlignment="Center" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                                        </StackPanel>
                                                    </Button>
                                                    <Button Grid.Column="3" Content="Scan" Click="ScanTopProcessButton_Click" Padding="12,4" VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </Border>
                        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                        <FontIcon Glyph="&#xE9F9;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                        <TextBlock Text="Scan Results" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button Grid.Column="1" x:Name="CleanAllButtonNarrow" Content="Clean All" Click="CleanAllScanResults_Click" Visibility="Collapsed" Style="{StaticResource AccentButtonStyle}" Padding="12,6"/>
                                </Grid>
                                <ScrollViewer Grid.Row="1" MaxHeight="250" VerticalScrollBarVisibility="Auto">
                                    <ListView x:Name="ScanResultsListViewNarrow" SelectionMode="None" HorizontalAlignment="Stretch" Margin="-12,0">
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Padding="12,8">
                                                    <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="{Binding ProcessName}" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                                        <TextBlock Text="{Binding ScanResult}" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" TextTrimming="CharacterEllipsis"/>
                                                    </StackPanel>
                                                    <Button Grid.Column="1" Content="Clean" Click="CleanScanResult_Click" Padding="12,6" VerticalAlignment="Center"/>
                                                </Grid>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>
                                </ScrollViewer>
                            </Grid>
                        </Border>
                        <!-- Card: Coming Soon -->
                        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="20">
                            <Grid>
                                <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                                    <FontIcon Glyph="&#xE9F9;" FontSize="24" Foreground="{ThemeResource AccentFillColorDefaultBrush}"/>
                                    <TextBlock Text="Coming Soon" Style="{ThemeResource SubtitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Spacing="16">
                                    <Border Background="{ThemeResource AccentFillColorDefaultBrush}" Opacity="0.5" CornerRadius="6" Padding="12">
                                        <StackPanel Spacing="4">
                                            <TextBlock Text="New Features" FontWeight="SemiBold"/>
                                            <TextBlock Text="We're working on exciting new features for this section. Stay tuned for updates!" TextWrapping="Wrap" Style="{ThemeResource CaptionTextBlockStyle}"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </ScrollViewer>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="WideState">
                    <VisualState.StateTriggers><AdaptiveTrigger MinWindowWidth="800" /></VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="WideLayoutGrid.Visibility" Value="Visible" />
                        <Setter Target="NarrowLayoutPanel.Visibility" Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="NarrowState">
                    <VisualState.StateTriggers><AdaptiveTrigger MinWindowWidth="0" /></VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="WideLayoutGrid.Visibility" Value="Collapsed" />
                        <Setter Target="NarrowLayoutPanel.Visibility" Value="Visible" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</Page>